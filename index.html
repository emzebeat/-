<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>بازی ممد</title>
<style>
    body {
        font-family: Tahoma, sans-serif;
        display:flex;
        justify-content:center;
        align-items:center;
        height:100vh;
        flex-direction:column;
        background:#2b0000; /* زرشکی تیره */
        color:white;
        margin:0;
    }
    .container {
        text-align:center;
        background:#000;
        padding:20px;
        border:3px solid #b11226; /* زرشکی */
        border-radius:15px;
        width:90%;
        max-width:500px;
    }
    input[type=text] {
        padding:10px;
        font-size:16px;
        margin:5px;
        width:80%;
        border-radius:5px;
        border:none;
    }
    button {
        padding:10px 20px;
        font-size:16px;
        margin:5px;
        border:none;
        border-radius:5px;
        background:#b11226; /* زرشکی */
        color:white;
        cursor:pointer;
    }
    button:hover {
        background:#ff4c5e;
    }
    .option {
        display:block;
        margin:10px 0;
        text-align:left;
    }
    .hidden { display:none; }
    #animation {
        font-size:36px;
        color:#b11226;
        margin:20px;
        animation: blink 0.5s infinite alternate;
    }
    @keyframes blink {
        from { opacity:1; }
        to { opacity:0.2; }
    }
</style>
</head>
<body>
<div class="container" id="game">
    <h2 id="stageTitle"></h2>
    <p id="stageText"></p>
    <div id="inputArea">
        <input type="text" id="inputAnswer" placeholder="">
        <button onclick="checkAnswer()">تایید</button>
    </div>
    <div id="optionsArea" class="hidden"></div>
</div>

<!-- صفحه انیمیشن بعد از جواب درست مرحله آخر -->
<div class="container hidden" id="animationDiv">
    <div id="animation">ممدِ رییس</div>
    <p>(بجاش جایزه داری)</p>
    <button onclick="showPrize()">اگه جایزت رو میخوای کلیک کن</button>
</div>

<!-- صفحه جایزه -->
<div class="container hidden" id="prizeDiv">
    <h2>سلام خوشگل ترین دختر دنیا</h2>
    <p>هزاران ماچا از طرف رییس برای تو</p>
    <p>(فدات بشم من)</p>
</div>

<script>
let stage = 1;
let wrongCounter = 0;

function showStage(){
    document.getElementById('inputAnswer').value = "";
    document.getElementById('inputArea').classList.remove('hidden');
    document.getElementById('optionsArea').classList.add('hidden');
    document.getElementById('animationDiv').classList.add('hidden');
    document.getElementById('prizeDiv').classList.add('hidden');

    const title = document.getElementById('stageTitle');
    const text = document.getElementById('stageText');
    const options = document.getElementById('optionsArea');

    if(stage === 1){
        title.innerText = "مرحله اول";
        text.innerText = "اسمتون چیه؟";
        document.getElementById('inputAnswer').placeholder = "جواب خودت را بنویس";
    }
    else if(stage === 2){
        title.innerText = "مرحله دوم";
        text.innerText = "چند سالته؟";
        showOptions(["2 سال","22 سال","2 سال از ممد کوچیک ترم"],3);
    }
    else if(stage === 3){
        title.innerText = "مرحله سوم";
        text.innerText = "رنگ مورد علاقت چیه؟";
        showOptions(["زرشکی","سفید","رنگ مورد علاقه ممد","رنگ مورد علاقه ممد+زرشکی"],4);
    }
    else if(stage === 4){
        title.innerText = "مرحله چهارم";
        text.innerText = "تفریحت چیه؟";
        showOptions(["بازی با موهای ممد"],1);
    }
    else if(stage === 5){
        title.innerText = "مرحله پنجم";
        text.innerText = "رییس کیه؟";
        showOptions(["نازنین","هیچکس","جفتمون","ممد"],4,true);
    }
}

// نمایش گزینه‌ها
function showOptions(arr, correctIndex, isLast=false){
    document.getElementById('inputArea').classList.add('hidden');
    const optionsDiv = document.getElementById('optionsArea');
    optionsDiv.innerHTML = "";
    optionsDiv.classList.remove('hidden');

    arr.forEach((opt,i)=>{
        const btn = document.createElement('button');
        btn.innerText = opt;
        btn.onclick = ()=>{
            if(i+1 === correctIndex){
                wrongCounter = 0;
                if(isLast){
                    document.getElementById('game').classList.add('hidden');
                    document.getElementById('animationDiv').classList.remove('hidden');
                } else {
                    stage++;
                    showStage();
                }
            } else {
                wrongCounter++;
                if(isLast){
                    const messages = [
                        "لجبازی نکن",
                        "بچه مرحله ی بعدی رو از دست میدی",
                        "بزن که همون درسته"
                    ];
                    alert(messages[Math.min(wrongCounter-1,messages.length-1)]);
                } else {
                    alert("اشتباهه! دوباره تلاش کن.");
                }
            }
        };
        optionsDiv.appendChild(btn);
    });
}

function checkAnswer(){
    const ans = document.getElementById('inputAnswer').value.trim();
    if(stage===1){
        const correctAnswers = ["دوست دختر ممد","دوس دختر ممد","دوست دختر محمد","دوس دختر محمد"];
        if(correctAnswers.includes(ans)){
            stage++;
            showStage();
        } else {
            alert("اشتباهه! دوباره تلاش کن.");
        }
    }
}

// رفتن به صفحه جایزه
function showPrize(){
    document.getElementById('animationDiv').classList.add('hidden');
    const prizeDiv = document.getElementById('prizeDiv');
    prizeDiv.classList.remove('hidden');

    setTimeout(()=>{
        window.close();
    },5000);
}

// شروع بازی
showStage();
</script>
</body>
</html>
